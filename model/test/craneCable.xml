<mujoco model="Rope">
  <!-- <compiler eulerseq="zyx" meshdir="assets" texturedir="assets" autolimits="true"/> -->

  <!-- <option timestep=0.00005/> -->

  <include file="scene.xml"/>

  <option timestep="0.001" jacobian="dense"/>
  <size nconmax="500" njmax="1500" nkey="1"/>

  <default>
    <geom solref="1e-2 5" solimp=".5 .99 1e-3" friction=".5"/>
  </default>


    <asset>
      <mesh name="shaft" scale="0.005 0.005 0.005" file="shaft2.stl"/>
    </asset>

  <worldbody>
    <light pos=".5 0 2"/>
    <!-- <geom type="box" pos="0 0 -1" size="10 10 0.03" rgba="1 1 1 1"/> -->

    <body name="payload" pos="0 0 0.15">
        <geom type="box" size=".05 .05 .05" rgba=".5 .2 .8 1" mass="1"/>
        <freejoint/>
        <body name="CB0" pos="0 0 0" euler="0 0 0">
            <composite type="cable" count="50 1 1" curve="0 0 s" offset="0 0 0" prefix="C" initial="ball">
                <joint kind="main" damping="0.0001" armature="0.00001"/>
                <geom type="capsule" size=".005 .01" rgba=".8 .2 .1 1"/>
            </composite>
        </body>
    </body>

    <body name="beam" pos="0 0 1.1" quat="0 1 0 1">
        <!-- <geom type="box" size=".45 .0375 .0375" mass="10"/> -->
        <body name="slider" pos="0 0 0">
            <geom type="cylinder" density="100" size=".08 .2 .08" rgba="0 1 0 1" mass="10"/>
            <joint name="pin" type="hinge" axis="0 0 1" pos="0 0 0" damping="1"/>
        </body>
    </body>

    <body name="shaft" pos="0.5 0 1.1">
      <joint name="shaftJ" type="hinge" axis="1 0 0"/>
      <geom type="mesh" mesh="shaft"/>
    </body>

    <body name="payload2" pos="0.5 0 0.15">
        <geom type="box" size=".05 .05 .05" rgba=".5 .2 .8 1" mass="1"/>
        <freejoint/>
        <body name="DB0" pos="0 0 0" euler="0 0 0">
            <composite type="cable" count="50 1 1" curve="0 0 s" offset="0 0 0" prefix="D" initial="ball">
                <joint kind="main" damping="0.01" armature="0.001"/>
                <geom type="capsule" size=".005 .01" rgba=".8 .2 .1 1"/>
            </composite>
        </body>
    </body>


    <body name="beam1" pos="1 0 1.1" quat="0 1 0 1">
        <!-- <geom type="box" size=".45 .0375 .0375" mass="10"/> -->
        <body name="slider1" pos="0 0 0">
            <geom type="cylinder" density="100" size=".05 .05 .05" rgba="0 1 0 1" mass="10"/>
            <geom type="cylinder" density="100" size=".08 .025 .08" pos="0 0 0.075" rgba="0 1 0 1" mass="10"/>
            <geom type="cylinder" density="100" size=".08 .025 .08" pos="0 0 -0.075" rgba="0 1 0 1" mass="10"/>
            <joint name="pin1" type="hinge" axis="0 0 1" pos="0 0 0" damping="1"/>
        </body>
    </body>

    <body name="payload3" pos="1 0 0.15">
        <geom type="box" size=".05 .05 .05" rgba=".5 .2 .8 1" mass="1"/>
        <freejoint/>
        <body name="EB0" pos="0 0 0" euler="0 0 0">
            <composite type="cable" count="50 1 1" curve="0 0 s" offset="0 0 0" prefix="E" initial="ball">
                <joint kind="main" damping="0.01" armature="0.001"/>
                <geom type="capsule" size=".005 .01" rgba=".8 .2 .1 1"/>
            </composite>
        </body>
    </body>

    

  </worldbody>

  <!-- <equality>
    <connect body1="beam" body2="CB_last" active="true" anchor="0 0 0" solref="-1000 -1000"/>
  </equality> -->

  <equality>
    <weld body1="beam" body2="CB_last" active="true" anchor="0 0 0" torquescale="0"/>
    <weld body1="beam1" body2="EB_last" active="true" anchor="0 0 0" torquescale="0"/>
     <weld body1="shaft" body2="DB_last" active="true" anchor="0 0 0" torquescale="0"/>
  </equality>

  <!-- <actuator>
    <motor name="motor" joint="pin" gear="1" ctrllimited="true" ctrlrange="-100 100"/>
  </actuator> -->

  <actuator>
    <position joint="pin" ctrllimited="true" ctrlrange="-20 20"/>
    <position joint="pin1" ctrllimited="true" ctrlrange="-20 20"/>
    <position joint="shaftJ" ctrllimited="true" ctrlrange="-20 20"/>
  </actuator>

</mujoco>  

